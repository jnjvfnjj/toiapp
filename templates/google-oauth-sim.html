<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Google OAuth Simulation</title>
    <meta name="viewport" content="width=device-width,initial-scale=1" />
  </head>
  <body style="display:flex;align-items:center;justify-content:center;height:100vh;font-family:Arial,Helvetica,sans-serif">
    <div style="text-align:center;max-width:360px;padding:20px;border:1px solid #ddd;border-radius:8px;">
      <h2>Google Sign-In (simulation)</h2>
      <p>This page simulates Google OAuth for local development.</p>
      <button id="send" style="padding:10px 16px;border-radius:8px;background:#1a73e8;color:#fff;border:none;cursor:pointer">Отправить данные в приложение</button>
      <p style="margin-top:12px;color:#666;font-size:13px">Откроется и автоматически закроется окно.</p>
    </div>

    <script>
      const button = document.getElementById('send');
      const payload = { type: 'google-auth', email: 'example@gmail.com', name: 'Google User' };
      function sendAndClose() {
        try {
          if (window.opener) {
            window.opener.postMessage(payload, window.location.origin);
          }
        } catch (e) {
          // ignore
        }
        window.close();
      }
      button?.addEventListener('click', () => sendAndClose());

      // Auto-send after short delay for convenience
      setTimeout(sendAndClose, 800);
    </script>
  </body>
</html>
